<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>html转markdown | 玉玲～</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">html转markdown</h1><a id="logo" href="/.">玉玲～</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">html转markdown</h1><div class="post-meta">Aug 14, 2019<span> | </span><span class="category"><a href="/categories/javascript-html-markdown/">javascript html markdown</a></span></div><div class="post-content"><p>根据路径url和cookie截取指定页面html并将整个页面转成markdown格式输出。<br><a id="more"></a></p>
<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><blockquote>
<p>最近接到一个需求，系统迁移，需要将公司wiki通过代码的形式转成markdown的形式然后将对应的markdown在另一个系统中转成html,在另一个系统中显示出来<br>for me: 需要我将wiki转成markdown的形式，然后供其他同事使用</p>
</blockquote>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><blockquote>
<p>01、传入 {url, cookie}<br>  02、获取 dom, 截取某个id内的url<br>  03、将截取到的html转成xml<br>  04、递归xml节点信息,边遍历边将指定节点信息转成markdown格式,遍历后至节点hasRead为true<br>  05、输出markdownStr</p>
</blockquote>
<h3 id="难点"><a href="#难点" class="headerlink" title="难点"></a>难点</h3><blockquote>
<p>01、如何根据 url和cookie去获取dom<br>  02、wiki获取的dom有混淆，遍历时需要排除已遍历的节点信息<br>  03、行内元素和块级元素的处理<br>  04、对wiki内存在表格和code的元素，截取的html都是table，如何根据信息将表格和code区分开<br>  05、某些dom元素渲染如下<code>&lt;p&gt;&lt;strong&gt;确认&lt;/strong&gt;&lt;p&gt;信息&lt;/p&gt;&lt;a&gt;链接&lt;/a&gt;如下&lt;/p&gt;</code> ,这种dom树如何正确转成markdown</p>
</blockquote>
<h3 id="对封装的代码解析如下"><a href="#对封装的代码解析如下" class="headerlink" title="对封装的代码解析如下:"></a>对封装的代码解析如下:</h3><ul>
<li><h4 id="入口"><a href="#入口" class="headerlink" title="入口"></a><strong>入口</strong></h4></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ConfluenceToMarkdown &#125; = <span class="built_in">require</span>(<span class="string">"lib/index.js"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> ConfluenceToMarkdown(options);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>lib下index入口</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">const</span> _ = <span class="built_in">require</span>(<span class="string">'lodash'</span>);</span><br><span class="line"><span class="keyword">const</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; confluence2md &#125; = <span class="built_in">require</span>(<span class="string">'./lib/confluence2md'</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConfluenceToMarkdown</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="keyword">var</span> options =</span><br><span class="line">      <span class="built_in">arguments</span>.length &gt; <span class="number">0</span> &amp;&amp; <span class="built_in">arguments</span>[<span class="number">0</span>] !== <span class="literal">undefined</span> ? <span class="built_in">arguments</span>[<span class="number">0</span>] : &#123;&#125;;</span><br><span class="line">    assert.ok(</span><br><span class="line">      options.url,</span><br><span class="line">      <span class="string">'缺少confluence文件路径----myfe/confluencetomarkdown'</span></span><br><span class="line">    );</span><br><span class="line">    assert.ok(</span><br><span class="line">      options.cookie,</span><br><span class="line">      <span class="string">'缺少当前用户cookie----myfe/confluencetomarkdown'</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.url = options.url;</span><br><span class="line">    <span class="keyword">this</span>.cookie = options.cookie;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">async</span> tomarkdown() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.url || !<span class="keyword">this</span>.cookie) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(&#123;</span><br><span class="line">          success: <span class="literal">false</span>,</span><br><span class="line">          code: <span class="number">400</span>,</span><br><span class="line">          message: <span class="string">'请求参数缺失'</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!_.isString(<span class="keyword">this</span>.url) ||</span><br><span class="line">        !_.isString(<span class="keyword">this</span>.cookie) ||</span><br><span class="line">        !<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'https://wiki.maoyan.com/pages'</span>).test(<span class="keyword">this</span>.url)</span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(&#123;</span><br><span class="line">          success: <span class="literal">false</span>,</span><br><span class="line">          code: <span class="number">400</span>,</span><br><span class="line">          message: <span class="string">'请求参数格式不正确'</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> confluence2md(&#123; <span class="attr">url</span>: <span class="keyword">this</span>.url, <span class="attr">cookie</span>: <span class="keyword">this</span>.cookie &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = ConfluenceToMarkdown;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>confluence2md 文件,利用superagent包将指定url获取dom节点信息</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> superagent = <span class="built_in">require</span>(<span class="string">'superagent'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; html2Xml &#125; = <span class="built_in">require</span>(<span class="string">'./util/html2xml'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> confluence2md = <span class="keyword">async</span> (url, cookie) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    superagent.get(url)</span><br><span class="line">        .set(<span class="string">'Cookie'</span>, cookie)</span><br><span class="line">        .end(<span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.info(<span class="string">'get page error url =&gt; '</span> + url);</span><br><span class="line">            <span class="keyword">return</span> reject(&#123;</span><br><span class="line">              success: <span class="literal">false</span>,</span><br><span class="line">              code: <span class="number">500</span>,</span><br><span class="line">              message: <span class="string">'url转换出错'</span></span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">const</span> markdownText = <span class="keyword">await</span> html2Xml(res.text);</span><br><span class="line">          <span class="keyword">return</span> resolve(&#123;</span><br><span class="line">            success: <span class="literal">true</span>,</span><br><span class="line">            code: <span class="number">200</span>,</span><br><span class="line">            message: <span class="string">'成功转换markdown'</span>,</span><br><span class="line">            data: markdownText</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = confluence2md;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>html2xml, 截取指定id内dom信息，转成xml，递归遍历xml节点信息，转成markdown格式</strong></p>
<h4 id="依赖和标签"><a href="#依赖和标签" class="headerlink" title="依赖和标签"></a>依赖和标签</h4></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> xpath = <span class="built_in">require</span>(<span class="string">'xpath'</span>);</span><br><span class="line"><span class="keyword">const</span> xmlDom = <span class="built_in">require</span>(<span class="string">'xmldom'</span>).DOMParser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> httpUrl = <span class="string">'https://baidu.com'</span>; <span class="comment">// url</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> markdownStr = <span class="string">``</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> IMGSRC = <span class="string">'data-image-src'</span>;</span><br><span class="line"><span class="keyword">const</span> BASEURL = <span class="string">'data-base-url'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> tagHtml = [</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'h1'</span>, <span class="attr">value</span>: <span class="string">'#'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'h2'</span>, <span class="attr">value</span>: <span class="string">'##'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'h3'</span>, <span class="attr">value</span>: <span class="string">'###'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'h4'</span>, <span class="attr">value</span>: <span class="string">'####'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'h5'</span>, <span class="attr">value</span>: <span class="string">'#####'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'h6'</span>, <span class="attr">value</span>: <span class="string">'######'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'strong'</span>, <span class="attr">value</span>: <span class="string">'**'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'hr'</span>, <span class="attr">value</span>: <span class="string">'---'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'p'</span>, <span class="attr">value</span>: <span class="string">''</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'span'</span>, <span class="attr">value</span>: <span class="string">''</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'pre'</span>, <span class="attr">value</span>: <span class="string">''</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'br'</span>, <span class="attr">value</span>: <span class="string">''</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'table'</span>, <span class="attr">value</span>: <span class="string">''</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'tr'</span>, <span class="attr">value</span>: <span class="string">''</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'a'</span>, <span class="attr">value</span>: <span class="string">'[]()'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'ul'</span>, <span class="attr">value</span>: <span class="string">''</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'ol'</span>, <span class="attr">value</span>: <span class="string">''</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'img'</span>, <span class="attr">value</span>: <span class="string">'![]'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">key</span>: <span class="string">'br'</span>, <span class="attr">value</span>: <span class="string">`\n`</span>&#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> blockLevelTag = [<span class="string">'p'</span>, <span class="string">'h1'</span>, <span class="string">'h2'</span>, <span class="string">'h3'</span>, <span class="string">'h4'</span>, <span class="string">'h5'</span>, <span class="string">'h6'</span>];</span><br><span class="line"><span class="keyword">const</span> tableNode = [<span class="string">'tr'</span>, <span class="string">'td'</span>, <span class="string">'th'</span>, <span class="string">'table'</span>, <span class="string">'tbody'</span>, <span class="string">'thead'</span>];</span><br><span class="line"><span class="keyword">const</span> thdTag = [<span class="string">'td'</span>, <span class="string">'th'</span>];</span><br><span class="line"><span class="keyword">const</span> lineFlagArr = [<span class="string">'#'</span>,  <span class="string">''</span>, <span class="string">'|'</span>];</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>html2Xml</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> html2Xml = <span class="keyword">async</span> (str) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> $ = cheerio.load(str);</span><br><span class="line">    <span class="keyword">let</span> contentStr = $(<span class="string">'#main-content'</span>).html(); <span class="comment">// 截取指定id内的dom</span></span><br><span class="line">    <span class="keyword">const</span> doc = <span class="keyword">new</span> xmlDom().parseFromString(contentStr); <span class="comment">// html转成xml</span></span><br><span class="line">    <span class="keyword">let</span> length = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 递归xml，转成md</span></span><br><span class="line">    length = doc.childNodes &amp;&amp; doc.childNodes.length ;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> nodeIndex = <span class="number">0</span>; nodeIndex &lt; length; nodeIndex ++) &#123;</span><br><span class="line">      deepTraversal(doc.childNodes[nodeIndex]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.info(markdownStr);</span><br><span class="line">   <span class="keyword">return</span> markdownStr;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>deepTraversal</strong> 递归时需注意行内元素和块级元素</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deepTraversal = <span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> nodes = [];</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *  过滤目录</span></span><br><span class="line"><span class="comment">   *  过滤code中toolbar div</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line">  <span class="keyword">const</span> marcDom = <span class="keyword">new</span> xmlDom().parseFromString(node.toString());</span><br><span class="line">  <span class="keyword">const</span> marcNode = xpath.select1(<span class="string">"/div/@class"</span>, marcDom);</span><br><span class="line">  <span class="keyword">if</span> ((marcNode !== <span class="literal">undefined</span> &amp;&amp; marcNode.value.indexOf(<span class="string">'toc'</span>) &gt; <span class="number">-1</span>) || (marcNode !== <span class="literal">undefined</span> &amp;&amp; marcNode.value === <span class="string">'toolbar'</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (node !== <span class="literal">null</span>) &#123;</span><br><span class="line">    nodes.push(node);</span><br><span class="line">    <span class="keyword">let</span> children = node.childNodes;</span><br><span class="line">    <span class="keyword">const</span> markdown = xml2Md(node);</span><br><span class="line">    <span class="keyword">const</span> currentTagFlag = blockLevelTag.indexOf(node.nodeName) &gt; <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">const</span> parentTagFlag = blockLevelTag.indexOf(node.parentNode.nodeName) &gt; <span class="number">-1</span>;</span><br><span class="line">    <span class="comment">// 块级元素整体换行</span></span><br><span class="line">    <span class="keyword">if</span> (lineFlagArr.indexOf(markdown.trim().substr(<span class="number">-1</span>)) &gt; <span class="number">-1</span> || (!currentTagFlag &amp;&amp; parentTagFlag)) &#123;</span><br><span class="line">      markdownStr += <span class="string">`<span class="subst">$&#123;markdown&#125;</span>`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (markdownStr.trim().substr(<span class="number">-1</span>) === <span class="string">'*'</span> &amp;&amp; markdownStr.trim().substr(<span class="number">-2</span>) !== <span class="string">'**'</span>)&#123;</span><br><span class="line">      markdownStr += <span class="string">`    <span class="subst">$&#123;markdown&#125;</span>\n`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      markdownStr += <span class="string">`<span class="subst">$&#123;markdown&#125;</span>\n`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (children) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; children.length; i++ ) &#123;</span><br><span class="line">        deepTraversal(children[i]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>xml2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> xml2Md = <span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> mds = <span class="string">``</span>;</span><br><span class="line"></span><br><span class="line">  tagHtml.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> nodeName = node.nodeName;</span><br><span class="line">    <span class="keyword">if</span> (item.key === nodeName) &#123;</span><br><span class="line">      <span class="keyword">let</span> md = <span class="string">``</span>;</span><br><span class="line">      <span class="keyword">switch</span>(item.key) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'img'</span>:</span><br><span class="line">          md = img2Md(node, item);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'a'</span>:</span><br><span class="line">          md = a2Md(node, item);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'table'</span>:</span><br><span class="line">          md = table2Md(node) + <span class="string">`\n`</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'strong'</span>:</span><br><span class="line">          md = strong2Md(node, item);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'p'</span>:</span><br><span class="line">          md = p2Md(node, item) + <span class="string">`\n`</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'ol'</span>:</span><br><span class="line">          md = ul2Md(node, item);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'ul'</span>:</span><br><span class="line">          md = ul2Md(node, item);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'pre'</span>:</span><br><span class="line">          md = code2Md(node, item);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">          md = default2Md(node, item);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (blockLevelTag.indexOf(node.nodeName) &gt; <span class="number">-1</span>) mds += <span class="string">`\n`</span>;</span><br><span class="line">      mds += md;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  mds.replace(<span class="string">`\n`</span>, <span class="string">''</span>);</span><br><span class="line">  <span class="keyword">return</span> mds;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>default2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> default2Md = <span class="function">(<span class="params">node, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 已读节点不再读取</span></span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 过滤由table带过来的遍历</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> parentDom = <span class="keyword">new</span> xmlDom().parseFromString(node.parentNode.toString());</span><br><span class="line">  <span class="keyword">const</span> parentClass = xpath.select1(<span class="string">"//@class"</span>, parentDom) &amp;&amp; xpath.select1(<span class="string">"//@class"</span>, parentDom).nodeValue;</span><br><span class="line">  <span class="keyword">if</span> (parentClass &amp;&amp; parentClass.indexOf(<span class="string">'table'</span>) &gt; <span class="number">-1</span>) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">if</span> (tableNode.indexOf(node.parentNode.nodeName) &gt; <span class="number">-1</span>) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> tableFlag = filterTable(node);</span><br><span class="line">  <span class="keyword">let</span> md = <span class="string">``</span>;</span><br><span class="line">  <span class="keyword">if</span> (tableFlag) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> blockFlag = blockLevelTag.indexOf(node.nodeName) &gt; <span class="number">-1</span>;</span><br><span class="line">  <span class="comment">// 主体</span></span><br><span class="line">  <span class="keyword">if</span> (blockFlag) &#123;</span><br><span class="line">    md += blockFlag2Md(node, item);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="string">``</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> dIndex = <span class="number">0</span>; dIndex &lt; node.childNodes.length; dIndex ++) &#123;</span><br><span class="line">      <span class="keyword">const</span> ccnode = node.childNodes[dIndex];</span><br><span class="line">      <span class="keyword">if</span> (node.childNodes[dIndex] &amp;&amp; node.childNodes[dIndex].hasRead) <span class="keyword">return</span>;</span><br><span class="line">      <span class="keyword">if</span> (node.childNodes[dIndex] &amp;&amp; node.childNodes[dIndex].nodeName === <span class="string">'#text'</span>) value += node.childNodes[dIndex].data;</span><br><span class="line">      value += xml2Md(ccnode &amp;&amp; node.childNodes[dIndex]);</span><br><span class="line">    &#125;</span><br><span class="line">    md = value === <span class="string">''</span> ? <span class="string">`<span class="subst">$&#123;item.value&#125;</span> `</span>  :  blockFlag ? <span class="string">`<span class="subst">$&#123;item.value&#125;</span> <span class="subst">$&#123;value&#125;</span>\n`</span> : <span class="string">`<span class="subst">$&#123;item.value&#125;</span> <span class="subst">$&#123;value&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="comment">// md += `\n`;</span></span><br><span class="line">  <span class="keyword">return</span> md;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>blockFlag2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> blockFlag2Md = <span class="function">(<span class="params">node, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> md = <span class="string">`<span class="subst">$&#123;item.value&#125;</span> `</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; node.childNodes.length; index ++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (node.childNodes[index].hasRead) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (node.childNodes[index].nodeName === <span class="string">'#text'</span>) md += node.childNodes[index].data;</span><br><span class="line">    md += xml2Md(node.childNodes[index]);</span><br><span class="line">    node.childNodes[index].hasRead = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> md;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>img2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> img2Md = <span class="function">(<span class="params">node, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> tableFlag = filterTable(node);</span><br><span class="line">  <span class="keyword">if</span> (tableFlag) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> attrLen = node.attributes.length;</span><br><span class="line">  <span class="keyword">let</span> imgBase = <span class="string">''</span>, imgSour = <span class="string">''</span>, imgSrc = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> attrIndex = <span class="number">0</span>; attrIndex &lt; attrLen; attrIndex ++) &#123;</span><br><span class="line">    <span class="keyword">const</span> attrItem = node.attributes[attrIndex];</span><br><span class="line">    <span class="keyword">if</span> (attrItem.nodeName === IMGSRC) imgSour = attrItem.nodeValue;</span><br><span class="line">    <span class="keyword">if</span> (attrItem.nodeName === BASEURL) imgBase = attrItem.nodeValue;</span><br><span class="line">    imgSrc = imgBase + imgSour;</span><br><span class="line">  &#125;</span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;item.value&#125;</span>(<span class="subst">$&#123;imgSrc&#125;</span>)`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>a2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a2Md = <span class="function">(<span class="params">node, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> tableFlag = filterTable(node);</span><br><span class="line">  <span class="keyword">if</span> (tableFlag) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> alink = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">const</span> aNode = <span class="keyword">new</span> xmlDom().parseFromString(node.toString());</span><br><span class="line">  <span class="keyword">const</span> hrefpath = xpath.select1(<span class="string">'/a/@href'</span>, aNode);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> aIndex = <span class="number">0</span>; aIndex &lt; node.attributes.length; aIndex ++) &#123;</span><br><span class="line">      <span class="keyword">const</span> aItem = node.attributes[aIndex];</span><br><span class="line">      <span class="keyword">if</span> (aItem.nodeName === <span class="string">'href'</span>) &#123;</span><br><span class="line">        alink = aItem.nodeValue;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (alink.substr(<span class="number">0</span>,<span class="number">1</span>) === <span class="string">'/'</span>) alink = <span class="string">`<span class="subst">$&#123;httpUrl&#125;</span><span class="subst">$&#123;alink&#125;</span>`</span>;</span><br><span class="line">  alink = <span class="string">`[<span class="subst">$&#123;node.childNodes[<span class="number">0</span>].data&#125;</span>](<span class="subst">$&#123;alink&#125;</span>)`</span>;</span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span><span class="string">`<span class="subst">$&#123;alink&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>strong2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> strong2Md = <span class="function">(<span class="params">node, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> tableFlag = filterTable(node);</span><br><span class="line">  <span class="keyword">if</span> (tableFlag) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> md = <span class="string">``</span>;</span><br><span class="line">  <span class="keyword">const</span> currntBlockFlag = node.nextSibling;</span><br><span class="line">  <span class="keyword">const</span> parentSubFlag = blockLevelTag.indexOf(node.parentNode.nodeName) &lt;= <span class="number">-1</span> &amp;&amp; node.parentNode.nextSibling;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> value = <span class="string">` **`</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> sIndex = <span class="number">0</span>; sIndex &lt; node.childNodes.length; sIndex ++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (node.childNodes[sIndex] &amp;&amp; node.childNodes[sIndex].hasRead) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (node.childNodes[sIndex] &amp;&amp; node.childNodes[sIndex].nodeName === <span class="string">'#text'</span>) value += node.childNodes[sIndex].data.trim() || <span class="string">''</span>;</span><br><span class="line">    value += xml2Md(node.childNodes[sIndex]).trim();</span><br><span class="line">    node.childNodes[sIndex].hasRead = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  md += value === <span class="string">'**'</span> ? <span class="string">''</span> : parentSubFlag || currntBlockFlag ? <span class="string">`<span class="subst">$&#123;value&#125;</span>**  `</span> : <span class="string">`<span class="subst">$&#123;value&#125;</span>**   \n`</span>  ;</span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> md;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>p2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p2Md = <span class="function">(<span class="params">node, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 过滤已读</span></span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  过滤table</span></span><br><span class="line">  <span class="keyword">const</span> tableFlag = filterTable(node);</span><br><span class="line">  <span class="keyword">if</span> (tableFlag) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> nodeChild = node.childNodes;</span><br><span class="line">  <span class="keyword">let</span> md = <span class="string">``</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; nodeChild.length; index ++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nodeChild[index].hasRead) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (nodeChild[index].nodeName === <span class="string">'#text'</span>) md += nodeChild[index].data;</span><br><span class="line">    md += xml2Md(nodeChild[index]);</span><br><span class="line">    nodeChild[index].hasRead = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> md;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ul2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ul2Md = <span class="function">(<span class="params">node, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  过滤table</span></span><br><span class="line">  <span class="keyword">const</span> tableFlag = filterTable(node);</span><br><span class="line">  <span class="keyword">if</span> (tableFlag) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> key = <span class="string">`*`</span>, ulMd = <span class="string">``</span>, liFlag = <span class="literal">false</span>; <span class="comment">// 默认为无序列表</span></span><br><span class="line">  <span class="keyword">if</span> (item.key === <span class="string">'ol'</span>) key = [];</span><br><span class="line">  <span class="keyword">if</span> (node.parentNode.nodeName === <span class="string">'li'</span>) &#123;</span><br><span class="line">    liFlag = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; node.childNodes.length; index ++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (node.childNodes[index].hasRead) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (ulMd.substr(<span class="number">-1</span>) === <span class="string">'*'</span>) ulMd = ulMd.trim();</span><br><span class="line">    ulMd += <span class="string">`<span class="subst">$&#123;key === <span class="string">'*'</span> ? <span class="string">`<span class="subst">$&#123;liFlag ? <span class="string">`\n  `</span>: <span class="string">''</span>&#125;</span>*`</span> : <span class="string">`<span class="subst">$&#123;liFlag ? <span class="string">`\n  `</span>: <span class="string">''</span>&#125;</span><span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>、`</span>&#125;</span> <span class="subst">$&#123;li2Md(node &amp;&amp; node.childNodes &amp;&amp; node.childNodes[index], key)&#125;</span> \n`</span>;</span><br><span class="line">    node.childNodes[index].hasRead = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> ulMd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>li2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> li2Md = <span class="function">(<span class="params">node, key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  过滤table</span></span><br><span class="line">  <span class="keyword">const</span> tableFlag = filterTable(node);</span><br><span class="line">  <span class="keyword">if</span> (tableFlag) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> limd = <span class="string">``</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; node.childNodes.length; index ++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(node.childNodes[index].hasRead)  <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (node.childNodes[index].nodeName === <span class="string">'#text'</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (limd.substr(<span class="string">'*'</span>)) limd = limd.trim();</span><br><span class="line">      limd += <span class="string">`<span class="subst">$&#123;node.childNodes[index].data&#125;</span>`</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (limd.substr(<span class="string">'*'</span>)) limd = limd.trim();</span><br><span class="line">      limd += xml2Md(node.childNodes[index]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    node.childNodes[index].hasRead = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> limd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>table2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> table2Md = <span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">let</span> nodestr = node.toString();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// table元素闭合问题</span></span><br><span class="line">  nodestr = nodestr.replace(<span class="string">'&lt;/table&gt;'</span>, <span class="string">''</span>);</span><br><span class="line">  nodestr = nodestr.replace(<span class="string">'&lt;/tbody&gt;'</span>, <span class="string">'&lt;/tbody&gt;&lt;/table&gt;'</span>);</span><br><span class="line">  nodestr = nodestr.substr(<span class="number">0</span>, nodestr.indexOf(<span class="string">'&lt;/table&gt;'</span>)) + <span class="string">'&lt;/table&gt;'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> tbodymd = <span class="string">`<span class="subst">$&#123;tbody2Md(nodestr)&#125;</span>`</span> || <span class="string">``</span>;</span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> tbodymd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>tbody2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tbody2Md = <span class="function">(<span class="params">nodestr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> node = <span class="keyword">new</span> xmlDom().parseFromString(nodestr);</span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">const</span> tableClass = xpath.select1(<span class="string">"/table/@class"</span>, node) &amp;&amp; xpath.select1(<span class="string">"/table/@class"</span>, node) &amp;&amp; xpath.select1(<span class="string">"/table/@class"</span>, node).value;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> tbodymd = <span class="string">``</span>;</span><br><span class="line">  <span class="keyword">if</span> (tableClass &amp;&amp; tableClass.indexOf(<span class="string">'confluenceTable'</span>) &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">    <span class="comment">// table</span></span><br><span class="line">    tbodymd += <span class="string">`\n <span class="subst">$&#123;nodestr&#125;</span> \n`</span>;</span><br><span class="line">    node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// code</span></span><br><span class="line">    <span class="keyword">const</span> trDom = <span class="keyword">new</span> xmlDom().parseFromString(nodestr);</span><br><span class="line">    <span class="keyword">const</span> trxpath = xpath.select(<span class="string">'//tr'</span>, trDom);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> trIndex = <span class="number">0</span>; trIndex &lt; trxpath.length; trIndex ++) &#123;</span><br><span class="line">      tbodymd += codeTrMd(trxpath[trIndex]);</span><br><span class="line">      trxpath[trIndex].hasRead = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> tbodymd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>codeTrMd</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// code to markdown</span></span><br><span class="line"><span class="keyword">const</span> codeTrMd = <span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> tdDom = <span class="keyword">new</span> xmlDom().parseFromString(node.toString());</span><br><span class="line">  <span class="keyword">const</span> tdpath = xpath.select(<span class="string">"//td/div/div"</span>, tdDom);</span><br><span class="line">  <span class="keyword">let</span> codemd = <span class="string">'\n'</span> + <span class="string">'```'</span> + <span class="string">`\n`</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> codeIndex = <span class="number">0</span>; codeIndex &lt; tdpath.length; codeIndex ++) &#123;</span><br><span class="line">    <span class="keyword">const</span> codeDom = <span class="keyword">new</span> xmlDom().parseFromString(tdpath[codeIndex].toString());</span><br><span class="line">    <span class="keyword">let</span> mdValue = xpath.select(<span class="string">"//code/text()"</span>, codeDom);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> mdValueIndex = <span class="number">0</span>; mdValueIndex &lt; mdValue.length; mdValueIndex ++) &#123;</span><br><span class="line">      codemd += mdValue[mdValueIndex].data;</span><br><span class="line">    &#125;</span><br><span class="line">    codemd += <span class="string">`\n`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  codemd += <span class="string">'```\n'</span>;</span><br><span class="line">  <span class="keyword">return</span> codemd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>filterTable</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filterTable = <span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> tdNode = findtd(node);</span><br><span class="line">  <span class="keyword">if</span> (!tdNode) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">const</span> filClass = xpath.select1(<span class="string">'//td/@class'</span>, tdNode);</span><br><span class="line">  <span class="keyword">const</span> thClass = xpath.select1(<span class="string">'//th/@class'</span>, tdNode);</span><br><span class="line">  <span class="keyword">if</span> (filClass &amp;&amp; (filClass.value.indexOf(<span class="string">'confluenceT'</span>) &gt; <span class="number">-1</span> || thClass.value.indexOf(<span class="string">'confluenceT'</span>) &gt; <span class="number">-1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>findtd</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> findtd = <span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> parent_node = node.parentNode;</span><br><span class="line">  <span class="keyword">const</span> pppnode = parent_node &amp;&amp; parent_node.parentNode;</span><br><span class="line">  <span class="keyword">const</span> forthnode = pppnode &amp;&amp; pppnode.parentNode;</span><br><span class="line">  <span class="keyword">const</span> fifthnode = forthnode &amp;&amp; forthnode.parentNode;</span><br><span class="line">  <span class="keyword">if</span> (node &amp;&amp; thdTag.indexOf(node.nodeName) &gt; <span class="number">-1</span>) <span class="keyword">return</span> node;</span><br><span class="line">  <span class="keyword">if</span> (parent_node &amp;&amp; thdTag.indexOf(parent_node.nodeName) &gt; <span class="number">-1</span>) <span class="keyword">return</span> parent_node;</span><br><span class="line">  <span class="keyword">if</span> (pppnode &amp;&amp; thdTag.indexOf(pppnode.nodeName) &gt; <span class="number">-1</span>) <span class="keyword">return</span> pppnode;</span><br><span class="line">  <span class="keyword">if</span> (forthnode &amp;&amp; thdTag.indexOf(forthnode.nodeName) &gt; <span class="number">-1</span>) <span class="keyword">return</span> forthnode;</span><br><span class="line">  <span class="keyword">if</span> (fifthnode &amp;&amp; thdTag.indexOf(fifthnode.nodeName) &gt; <span class="number">-1</span>) <span class="keyword">return</span> fifthnode;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>code2Md</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pre tag code to markdown</span></span><br><span class="line"><span class="keyword">const</span> code2Md = <span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// console.info(node.toString());</span></span><br><span class="line">  <span class="keyword">if</span> (node.hasRead) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// filter code tag from table</span></span><br><span class="line">  <span class="keyword">const</span> tableFlag = filterTable(node);</span><br><span class="line">  <span class="keyword">if</span> (tableFlag) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> codeDom = <span class="keyword">new</span> xmlDom().parseFromString(node.toString());</span><br><span class="line">  <span class="keyword">const</span> nodepath = xpath.select1(<span class="string">"/pre/text()"</span>,codeDom);</span><br><span class="line">  <span class="keyword">const</span> nodeClass = xpath.select1(<span class="string">"/pre/@class"</span>, codeDom);</span><br><span class="line">  <span class="keyword">if</span>(!nodeClass || nodeClass === <span class="string">'undefined'</span> || (nodeClass &amp;&amp; nodeClass.nodeValue).indexOf(<span class="string">'highlighter'</span>) &lt;= <span class="number">-1</span>) <span class="keyword">return</span> nodepath &amp;&amp; nodepath.nodeValue || <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">const</span> lanagepath = xpath.select1(<span class="string">"/pre/@data-syntaxhighlighter-params"</span>, codeDom);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> md = <span class="string">'```'</span>;</span><br><span class="line">  <span class="keyword">let</span> lanage = lanagepath &amp;&amp; lanagepath.nodeValue &amp;&amp; lanagepath.nodeValue.split(<span class="string">';'</span>) &amp;&amp; lanagepath.nodeValue.split(<span class="string">';'</span>)[<span class="number">0</span>].split(<span class="string">':'</span>)[<span class="number">1</span>] || <span class="string">''</span>;</span><br><span class="line">  md += <span class="string">`<span class="subst">$&#123;lanage&#125;</span> \n <span class="subst">$&#123;nodepath &amp;&amp; nodepath.nodeValue || <span class="string">''</span>&#125;</span> \n`</span>;</span><br><span class="line">  md += <span class="string">'```'</span>;</span><br><span class="line">  node.hasRead = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> md;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/benyl-nie/html-markdown" target="_blank" rel="noopener">github地址</a></p>
</div><div class="tags"><a href="/tags/javascript-cheerio-xml-markdown/">javascript cheerio xml markdown</a></div><div class="post-nav"><a class="pre" href="/2019/08/14/三数之和/">三数之和</a><a class="next" href="/2019/08/14/React性能优化技巧学习整理/">react14to16</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC80NTYzNS8yMjE0Ng=="><script>(function(d, s) {
   var j, e = d.getElementsByTagName(s)[0];
   if (typeof LivereTower === 'function') { return; }
   j = d.createElement(s);
   j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
   j.async = true;
   e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://www.benyl.cn"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript-html-markdown/">javascript html markdown</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/javascript-单链表-leetcode/" style="font-size: 15px;">javascript 单链表 leetcode</a> <a href="/tags/antd-react/" style="font-size: 15px;">antd react</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/javascript-promise/" style="font-size: 15px;">javascript promise</a> <a href="/tags/git-revert/" style="font-size: 15px;">git revert</a> <a href="/tags/javascript-es6/" style="font-size: 15px;">javascript es6</a> <a href="/tags/chrome-cookies/" style="font-size: 15px;">chrome cookies</a> <a href="/tags/node-thrift/" style="font-size: 15px;">node thrift</a> <a href="/tags/javascript-leetcode-算法/" style="font-size: 15px;">javascript leetcode 算法</a> <a href="/tags/javscript-https/" style="font-size: 15px;">javscript https</a> <a href="/tags/javascript-leetcode-链表/" style="font-size: 15px;">javascript leetcode 链表</a> <a href="/tags/vue-单页面应用-请求耗时/" style="font-size: 15px;">vue 单页面应用 请求耗时</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/javascript-node/" style="font-size: 15px;">javascript node</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/javascript-兼容/" style="font-size: 15px;">javascript 兼容</a> <a href="/tags/算法-javascript/" style="font-size: 15px;">算法 javascript</a> <a href="/tags/javaScript-Array/" style="font-size: 15px;">javaScript Array</a> <a href="/tags/koa/" style="font-size: 15px;">koa</a> <a href="/tags/vue-性能优化-白屏/" style="font-size: 15px;">vue 性能优化 白屏</a> <a href="/tags/vue3-axios-跨域/" style="font-size: 15px;">vue3 axios 跨域</a> <a href="/tags/javascript-cheerio-xml-markdown/" style="font-size: 15px;">javascript cheerio xml markdown</a> <a href="/tags/vue3-koa2-微信/" style="font-size: 15px;">vue3 koa2 微信</a> <a href="/tags/React-性能优化-javascript/" style="font-size: 15px;">React 性能优化 javascript</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/11/06/单页面应用打开耗时很慢/">单页面应用打开耗时很慢</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/26/vue首屏白屏分析解决/">vue首屏白屏分析解决</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/23/vue3-node-koa-实现微信自定义分享/">vue3+node(koa)实现微信自定义分享</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/23/vue请求跨域/">vue请求跨域</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/01/git操作之revert/">git操作之revert</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/17/samesite/">samesite</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/动态菜单获取/">动态菜单获取</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/thrift环境搭建/">thrift环境搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/爬楼梯/">爬楼梯</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/react-升级问题汇总/">react 升级问题汇总</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://shimeng.info/" title="小时哥-erics" target="_blank">小时哥-erics</a><ul></ul><a href="https://www.haomwei.com/" title="屠城-屠夫9411的博客" target="_blank">屠城-屠夫9411的博客</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">玉玲～.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>