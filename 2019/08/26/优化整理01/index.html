<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>优化整理之react14至16 | 玉玲～</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">优化整理之react14至16</h1><a id="logo" href="/.">玉玲～</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">优化整理之react14至16</h1><div class="post-meta">Aug 26, 2019</div><div class="post-content"><p>总结了一些负责项目升级点</p>
<a id="more"></a>
<h3 id="以下总结摘自："><a href="#以下总结摘自：" class="headerlink" title="以下总结摘自："></a>以下总结摘自：</h3><p><strong><a href="https://blog.csdn.net/mapbar_front/article/details/80187123" target="_blank" rel="noopener">React16 版本更新的新特性</a><br><a href="https://blog.csdn.net/Napoleonxxx/article/details/81120854" target="_blank" rel="noopener">React v15 到 v16.3, v16.4 新生命周期总结以及使用场景</a><br><a href="https://blog.csdn.net/u013451157/article/details/78719374" target="_blank" rel="noopener">【ReactJS】V0.14 版本前后的变化</a><br><a href="https://www.jianshu.com/p/a8bc5b292561" target="_blank" rel="noopener">react14 到 15 版本主要变更</a><br><a href="https://blog.csdn.net/xiaozhuo_tang/article/details/88878858" target="_blank" rel="noopener">React15 至今的重要变化人肉梳理</a></strong></p>
<h3 id="总结如下："><a href="#总结如下：" class="headerlink" title="总结如下："></a>总结如下：</h3><ul>
<li><h3 id="react-14-到-15"><a href="#react-14-到-15" class="headerlink" title="react 14 到 15"></a><strong>react 14 到 15</strong></h3><ul>
<li>当在挂载组件时使用 document.createElement 而不是 innerHTML，这样我们就摆脱了 data-reactid。并且 document.createElement 在现代浏览器中也更快；<br><strong>值得注意：</strong> data-reactid 在 client 端已经去除了，但依旧存在在服务端渲染中，不过更小更简 单是简单递增的。</li>
<li>由于历史原因对 SVG 的不完整支持，在 React 15 中支持了所有被现代浏览器所支持的 SVG 属性；</li>
<li>社区（Michael Wiencek）的贡献使得 React 15 不再需要多余的对 text 进行包裹；</li>
<li>渲染 Null 现在使用 comment nodes（注释节点）了；</li>
<li>函数式组件现在也能返回 null 了；</li>
<li>移除和弃用<ul>
<li>移除包括：<br><strong>indDOMNode，render，renderToSring，renderToStaticMarkup 和 unmountComponentAtNode</strong>几个顶级 API，不过他们都能在<strong>ReactDom 和 ReactDomServer</strong>中找到；</li>
<li>移除的插件： <strong>cloneWithProps 和 batchedUpdates</strong></li>
<li>移除的组件实例方法：<strong>setProps、replaceProps 和 getDOMNode</strong></li>
</ul>
</li>
</ul>
</li>
<li><h3 id="react-15-的一些重大变化"><a href="#react-15-的一些重大变化" class="headerlink" title="react 15 的一些重大变化"></a><strong>react 15 的一些重大变化</strong></h3><ul>
<li>彻底分离<strong>React 和 React DOM</strong>，现在 React 中将只含有与渲染无关的代码例如：<strong>React.Component 和 React.createElement()</strong></li>
<li>React DOM Server 包体积大小几乎与 React 相当，因为他有一份自己的 React reconciler。<strong>不建议在 client 端使用 React DOM Server</strong></li>
<li>拆分了 React.PropTypes 和 React.createClass 到独立的包中；</li>
<li>React.PropTypes 迁移到了 prop-types 包中,迁移指南；</li>
<li>React.createClass 迁移到 create-react-class 中，但由于 ES2015 对 class 的支持，React 也开始使用原生的 class 来创建 components；</li>
<li>data-和 aria-的属性将会任我们自定义</li>
</ul>
</li>
<li><h3 id="react-16-的一些重大变化"><a href="#react-16-的一些重大变化" class="headerlink" title="react 16 的一些重大变化"></a><strong>react 16 的一些重大变化</strong></h3><ul>
<li>NEW FEATURE：fragments、error boundaries(已经介绍过不做赘述)、portals</li>
<li>NEW SUPPORT：custom DOM attributes</li>
<li>IMPROVEMENT：server-side rendering</li>
<li>render 函数能 return：React elements、Array 和<a href="https://reactjs.org/docs/fragments.html" target="_blank" rel="noopener">fragments</a>、Portals、Booleans or null、String and numbers</li>
<li><a href="https://reactjs.org/docs/portals.html" target="_blank" rel="noopener">portals</a>是由 React DOM 提供的方法 createPortal(child, container)所创建出来的，能够让元素脱离于 React Tree 在 DOM Tree 的其他地方出现，但事件冒泡依旧是遵循 React DOM tree 的。这个方法可以用来实现 Modal、dialog、tooltips 等。</li>
<li>更好的服务端渲染：支持流式的传输、三倍快与 React 15 的渲染速度。值得注意的是，React 16 hydrate 工作在 client 端时会使用已经在服务端渲染好的 DOM 结构，而不会做细致检查，只会在 Client 端提示你数据不统一，并且也不建议在 server 端渲染和 client 端 hydrate 时数据不同</li>
<li>降低了包大小：react 5.3kb(2.2kb gzipped)、react-dom 103.7kb(32.6kb gzipped)</li>
<li>Breaking changes 摘要：<ul>
<li>setState(null)不再会引起更新、setState 的 callback 将会在 componentDidMount/componentDidUpdate 后立即执行，而不是在所有 components 渲染后执行</li>
<li><b>替换<a>时，B 的 componentWillMount 总会发生在 A 的 componentWIllUnmount 之前</a></b></li>
<li>shallow renderer 不会再出发 componentDidUpdate 因为 DOM refs 是拿不到的，并与 componentDidMount 表现一致</li>
<li>功能剥离：React.PropTypes =&gt; prop-types、React.Dom =&gt; react-dom-factories、react-addons-test-utils =&gt; react-dom/test-utils、shallow renderer =&gt; react-test-renderer/shallow</li>
</ul>
</li>
<li>React 16 依赖于 Map 和 Set，如果要支持老旧浏览器和设备，应该引入全局的 polyfill，例如 core-js 和 babel-polyfill，同样也依赖于 requestAnimationFrame，可以用 raf 包来弥补</li>
<li>异步渲染的更新：Two Demos<ul>
<li>ime slicing、suspense</li>
</ul>
</li>
<li>正式的<a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener">Context API</a></li>
<li><a href="https://reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener">createRef API</a>、<a href="https://reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener">forwardRef API</a></li>
<li>生命周期的变更，可参看<a href="https://blog.csdn.net/xiaozhuo_tang/article/details/83824824" target="_blank" rel="noopener">【译】React16.3+ 生命周期</a><ul>
<li>componentWillMount、componentWillReceiveProps、componentWillUpdate 都不建议在使用并且在 17 中将会被冠上 UNSAFE_的前缀；</li>
<li>新增了 getDerivedStateFromProps、getSnapshotBeforeUpdate 两个生命周期</li>
</ul>
</li>
<li>React 16.5.0 以上在 React Devtools 新增了一个新功能 Profiler，来帮助我们梳理 React 项目各组件的性能</li>
<li>React.memo 让 Function 组件用上 PureComponent</li>
<li>React.lazy 配合 Suspence 和动态引入 import(’’)来优化体验（例如 loading 状态）</li>
<li>static contextType</li>
<li><a href="https://zh-hans.reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener">hooks</a></li>
</ul>
</li>
</ul>
<p><strong><a href="https://zh-hans.reactjs.org/docs/getting-started.html" target="_blank" rel="noopener">参考学习</a></strong></p>
</div><div class="tags"><a href="/tags/react/">react</a></div><div class="post-nav"><a class="pre" href="/2019/09/01/es6-promise摘/">es6-promise摘</a><a class="next" href="/2019/08/18/反转部分单链表/">反转部分单链表</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC80NTYzNS8yMjE0Ng=="><script>(function(d, s) {
   var j, e = d.getElementsByTagName(s)[0];
   if (typeof LivereTower === 'function') { return; }
   j = d.createElement(s);
   j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
   j.async = true;
   e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://www.benyl.cn"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/javascript-promise/" style="font-size: 15px;">javascript promise</a> <a href="/tags/javascript-cheerio-xml-markdown/" style="font-size: 15px;">javascript cheerio xml markdown</a> <a href="/tags/javascript-es6/" style="font-size: 15px;">javascript es6</a> <a href="/tags/javascript-leetcode-算法/" style="font-size: 15px;">javascript leetcode 算法</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/javascript-leetcode-链表/" style="font-size: 15px;">javascript leetcode 链表</a> <a href="/tags/javascript-单链表-leetcode/" style="font-size: 15px;">javascript 单链表 leetcode</a> <a href="/tags/javascript-兼容/" style="font-size: 15px;">javascript 兼容</a> <a href="/tags/javaScript-Array/" style="font-size: 15px;">javaScript Array</a> <a href="/tags/React-性能优化-javascript/" style="font-size: 15px;">React 性能优化 javascript</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/09/01/趣知识/">趣知识</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/01/两个数组的交集-II/">两个数组的交集 II</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/01/找到字符串中所有字母异位词/">找到字符串中所有字母异位词</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/01/时间safari与chrome/">时间safari与chrome</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/01/es6-promise摘/">es6-promise摘</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/26/优化整理01/">优化整理之react14至16</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/18/反转部分单链表/">反转部分单链表</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/14/单链表反转/">单链表反转</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/14/三数只和/">三数只和</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/14/两数之和/">两数之和</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://shimeng.info/" title="小时哥-erics" target="_blank">小时哥-erics</a><ul></ul><a href="https://www.haomwei.com/" title="屠城-屠夫9411的博客" target="_blank">屠城-屠夫9411的博客</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">玉玲～.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>