<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>React14.x升16.8 | 玉玲～</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">React14.x升16.8</h1><a id="logo" href="/.">玉玲～</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">React14.x升16.8</h1><div class="post-meta">Jan 13, 2020</div><div class="post-content"><p>react 14升16.8 二期总结</p>
<a id="more"></a>
<h3 id="以下总结摘自："><a href="#以下总结摘自：" class="headerlink" title="以下总结摘自："></a>以下总结摘自：</h3><p><strong><a href="https://blog.csdn.net/mapbar_front/article/details/80187123" target="_blank" rel="noopener">React16版本更新的新特性</a><br><a href="https://blog.csdn.net/Napoleonxxx/article/details/81120854" target="_blank" rel="noopener">React v15到v16.3, v16.4新生命周期总结以及使用场景</a><br><a href="https://blog.csdn.net/u013451157/article/details/78719374" target="_blank" rel="noopener">【ReactJS】V0.14版本前后的变化</a><br><a href="https://www.jianshu.com/p/a8bc5b292561" target="_blank" rel="noopener">react14到15版本主要变更</a><br><a href="https://blog.csdn.net/xiaozhuo_tang/article/details/88878858" target="_blank" rel="noopener">React15至今的重要变化人肉梳理</a></strong></p>
<h3 id="总结如下："><a href="#总结如下：" class="headerlink" title="总结如下："></a>总结如下：</h3><ul>
<li><h3 id="react-14-到-15"><a href="#react-14-到-15" class="headerlink" title="react 14 到 15"></a><strong>react 14 到 15</strong></h3><ul>
<li>当在挂载组件时使用document.createElement而不是innerHTML，这样我们就摆脱了data-reactid。并且document.createElement在现代浏览器中也更快；<br><strong>值得注意：</strong> data-reactid在client端已经去除了，但依旧存在在服务端渲染中，不过更小更简    单是简单递增的。</li>
<li>由于历史原因对SVG的不完整支持，在React 15中支持了所有被现代浏览器所支持的SVG属性；</li>
<li>社区（Michael Wiencek）的贡献使得React 15不再需要多余的对text进行包裹；</li>
<li>渲染Null现在使用comment nodes（注释节点）了；</li>
<li>函数式组件现在也能返回null了；</li>
<li>移除和弃用<ul>
<li>移除包括：<br><strong>indDOMNode，render，renderToSring，renderToStaticMarkup和unmountComponentAtNode</strong>几个顶级API，不过他们都能在<strong>ReactDom和ReactDomServer</strong>中找到；</li>
<li>移除的插件： <strong>cloneWithProps和batchedUpdates</strong></li>
<li>移除的组件实例方法：<strong>setProps、replaceProps和getDOMNode</strong></li>
</ul>
</li>
</ul>
</li>
<li><h3 id="react-15-的一些重大变化"><a href="#react-15-的一些重大变化" class="headerlink" title="react 15 的一些重大变化"></a><strong>react 15 的一些重大变化</strong></h3><ul>
<li>彻底分离<strong>React和React DOM</strong>，现在React中将只含有与渲染无关的代码例如：<strong>React.Component和React.createElement()</strong></li>
<li>React DOM Server包体积大小几乎与React相当，因为他有一份自己的React reconciler。<strong>不建议在client端使用React DOM Server</strong></li>
<li>拆分了React.PropTypes和React.createClass到独立的包中；</li>
<li>React.PropTypes迁移到了prop-types包中,迁移指南；</li>
<li>React.createClass迁移到create-react-class中，但由于ES2015对class的支持，React也开始使用原生的class来创建components；</li>
<li>data-和aria-的属性将会任我们自定义</li>
</ul>
</li>
<li><h3 id="react-16的一些重大变化"><a href="#react-16的一些重大变化" class="headerlink" title="react 16的一些重大变化"></a><strong>react 16的一些重大变化</strong></h3><ul>
<li>NEW FEATURE：fragments、error boundaries(已经介绍过不做赘述)、portals</li>
<li>NEW SUPPORT：custom DOM attributes</li>
<li>IMPROVEMENT：server-side rendering</li>
<li>render函数能return：React elements、Array和<a href="https://reactjs.org/docs/fragments.html" target="_blank" rel="noopener">fragments</a>、Portals、Booleans or null、String and numbers</li>
<li><a href="https://reactjs.org/docs/portals.html" target="_blank" rel="noopener">portals</a>是由React DOM提供的方法createPortal(child, container)所创建出来的，能够让元素脱离于React Tree在DOM Tree的其他地方出现，但事件冒泡依旧是遵循React DOM tree的。这个方法可以用来实现Modal、dialog、tooltips等。</li>
<li>更好的服务端渲染：支持流式的传输、三倍快与React 15的渲染速度。值得注意的是，React 16 hydrate工作在client端时会使用已经在服务端渲染好的DOM结构，而不会做细致检查，只会在Client端提示你数据不统一，并且也不建议在server端渲染和client端hydrate时数据不同</li>
<li>降低了包大小：react 5.3kb(2.2kb gzipped)、react-dom 103.7kb(32.6kb gzipped)</li>
<li>Breaking changes摘要：<ul>
<li>setState(null)不再会引起更新、setState的callback将会在componentDidMount/componentDidUpdate后立即执行，而不是在所有components渲染后执行</li>
<li><b>替换<a>时，B的componentWillMount总会发生在A的componentWIllUnmount之前</a></b></li>
<li>shallow renderer不会再出发componentDidUpdate因为DOM refs是拿不到的，并与componentDidMount表现一致</li>
<li>功能剥离：React.PropTypes =&gt; prop-types、React.Dom =&gt; react-dom-factories、react-addons-test-utils =&gt; react-dom/test-utils、shallow renderer =&gt; react-test-renderer/shallow</li>
</ul>
</li>
<li>React 16依赖于Map和Set，如果要支持老旧浏览器和设备，应该引入全局的polyfill，例如core-js和babel-polyfill，同样也依赖于requestAnimationFrame，可以用raf包来弥补</li>
<li>异步渲染的更新：Two Demos<ul>
<li>ime slicing、suspense</li>
</ul>
</li>
<li>正式的<a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener">Context API</a></li>
<li><a href="https://reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener">createRef API</a>、<a href="https://reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener">forwardRef API</a></li>
<li>生命周期的变更，可参看<a href="https://blog.csdn.net/xiaozhuo_tang/article/details/83824824" target="_blank" rel="noopener">【译】React16.3+ 生命周期</a><ul>
<li>componentWillMount、componentWillReceiveProps、componentWillUpdate都不建议在使用并且在17中将会被冠上UNSAFE_的前缀；</li>
<li>新增了getDerivedStateFromProps、getSnapshotBeforeUpdate两个生命周期</li>
</ul>
</li>
<li>React 16.5.0以上在React Devtools新增了一个新功能Profiler，来帮助我们梳理React项目各组件的性能</li>
<li>React.memo 让Function组件用上PureComponent</li>
<li>React.lazy配合Suspence和动态引入import(’’)来优化体验（例如loading状态）</li>
<li>static contextType</li>
<li><a href="https://zh-hans.reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener">hooks</a></li>
</ul>
</li>
</ul>
</div><div class="tags"><a href="/tags/react/">react</a></div><div class="post-nav"><a class="pre" href="/2020/01/13/react-升级问题汇总/">react 升级问题汇总</a><a class="next" href="/2020/01/13/Bootstrap-转antd调研处理/">Bootstrap 转antd调研处理</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC80NTYzNS8yMjE0Ng=="><script>(function(d, s) {
   var j, e = d.getElementsByTagName(s)[0];
   if (typeof LivereTower === 'function') { return; }
   j = d.createElement(s);
   j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
   j.async = true;
   e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://www.benyl.cn"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript-html-markdown/">javascript html markdown</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/javascript-leetcode-链表/" style="font-size: 15px;">javascript leetcode 链表</a> <a href="/tags/antd-react/" style="font-size: 15px;">antd react</a> <a href="/tags/javascript-promise/" style="font-size: 15px;">javascript promise</a> <a href="/tags/javascript-cheerio-xml-markdown/" style="font-size: 15px;">javascript cheerio xml markdown</a> <a href="/tags/React-性能优化-javascript/" style="font-size: 15px;">React 性能优化 javascript</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/javascript-es6/" style="font-size: 15px;">javascript es6</a> <a href="/tags/javascript-leetcode-算法/" style="font-size: 15px;">javascript leetcode 算法</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/javascript-单链表-leetcode/" style="font-size: 15px;">javascript 单链表 leetcode</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/javascript-兼容/" style="font-size: 15px;">javascript 兼容</a> <a href="/tags/javscript-https/" style="font-size: 15px;">javscript https</a> <a href="/tags/javaScript-Array/" style="font-size: 15px;">javaScript Array</a> <a href="/tags/koa/" style="font-size: 15px;">koa</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/react-升级问题汇总/">react 升级问题汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/React14-x升16-8/">React14.x升16.8</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/Bootstrap-转antd调研处理/">Bootstrap 转antd调研处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/判断是否为ie浏览器/">判断是否为ie浏览器</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/git-踩坑点总结/">git 踩坑点总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/22/对称二叉树/">对称二叉树</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/22/矩阵置零/">矩阵置零</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/22/记一次请求转发处理/">记一次请求转发处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/01/两个数组的交集-II/">两个数组的交集 II</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/01/找到字符串中所有字母异位词/">找到字符串中所有字母异位词</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://shimeng.info/" title="小时哥-erics" target="_blank">小时哥-erics</a><ul></ul><a href="https://www.haomwei.com/" title="屠城-屠夫9411的博客" target="_blank">屠城-屠夫9411的博客</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">玉玲～.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>